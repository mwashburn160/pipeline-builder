---
# =============================================================================
# Common Environment (shared by ALL API services)
# =============================================================================
apiVersion: v1
kind: ConfigMap
metadata:
  name: common-env
  namespace: pipeline-builder
data:
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"
  PLATFORM_BASE_URL: "https://localhost:30443"

---
# =============================================================================
# PostgreSQL Environment (shared by Postgres-backed services)
# =============================================================================
apiVersion: v1
kind: ConfigMap
metadata:
  name: postgres-env
  namespace: pipeline-builder
data:
  DB_HOST: "postgres"
  DB_PORT: "5432"
  DATABASE: "pipeline_builder"
  DRIZZLE_MAX_POOL_SIZE: "20"
  DRIZZLE_IDLE_TIMEOUT_MILLIS: "30000"
  DRIZZLE_CONNECTION_TIMEOUT_MILLIS: "10000"

---
# =============================================================================
# Server Environment (shared by Express server services)
# =============================================================================
apiVersion: v1
kind: ConfigMap
metadata:
  name: server-env
  namespace: pipeline-builder
data:
  CORS_CREDENTIALS: "true"
  CORS_ORIGIN: ""
  LIMITER_MAX: "100"
  LIMITER_WINDOWMS: "900000"

---
# =============================================================================
# Quota Client Environment (services that call the quota service)
# =============================================================================
apiVersion: v1
kind: ConfigMap
metadata:
  name: quota-client-env
  namespace: pipeline-builder
data:
  QUOTA_SERVICE_HOST: "quota"
  QUOTA_SERVICE_PORT: "3000"
